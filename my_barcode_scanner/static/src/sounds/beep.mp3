// Update this portion of your template.xml file where the barcode is detected.
// Look for this section in your code:

codeReader.decodeFromVideoDevice(selectedDeviceId, 'scanner-video', (result, err) => {
    if (result && isScanning) {
        console.log("Barcode detected:", result.text);
        
        // Add this code to play the beep sound directly
        try {
            // Base64 encoded short beep sound
            const beepSound = 'data:audio/mp3;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV';
            const audio = new Audio(beepSound);
            audio.play().catch(e => console.warn('Beep sound failed:', e));
        } catch (e) {
            console.error('Error with beep sound:', e);
        }
        
        // Process the barcode
        processBarcodeResult(result.text);
        
        // Pause scanning briefly to avoid multiple scans of the same barcode
        isScanning = false;
        setTimeout(() => {
            isScanning = true;
        }, 2000); // 2 second delay before allowing next scan
    }
    
    if (err && !(err instanceof ZXing.NotFoundException)) {
        console.error("Scanner error:", err);
    }
});
